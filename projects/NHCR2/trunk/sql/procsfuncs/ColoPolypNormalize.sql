create or replace function ColoPolypNormalize (    in in_event_id integer)returns void as $BODY$    declare lcl_barcode varchar;    declare lcl_p_loc varchar;    declare lcl_p_siz integer;    declare lcl_pt_cb integer;    declare lcl_pt_hb integer;    declare lcl_pt_hs integer;    declare lcl_pt_cs integer;    declare lcl_pt_pme integer;    declare lcl_pt_pe integer;    declare lcl_pt_nr integer;    declare lcl_pt_lo integer;    declare lcl_pt_o integer;    declare lcl_p_flat integer;begin    if exists (select * from colo where event_id = in_event_id and (p_loc_a in (select location_text from location) or p_siz_a in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'A')) then                 select  barcode,p_loc_a,p_siz_a,pt_cb_a,pt_hb_a,pt_hs_a,pt_cs_a,pt_pme_a,pt_pe_a,pt_nr_a,pt_lo_a,pt_o_a,p_flat_a into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'A',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_a, pt_te = lcl_pt_te_a where event_id = in_event_id and old_polyp_id = 'A';                end if;    end if;    if exists (select * from colo where event_id = in_event_id and (p_loc_b in (select location_text from location) or p_siz_b in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'B')) then                 select  barcode,p_loc_b,p_siz_b,pt_cb_b,pt_hb_b,pt_hs_b,pt_cs_b,pt_pme_b,pt_pe_b,pt_nr_b,pt_lo_b,pt_o_b,p_flat_b into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'B',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_b, pt_te = lcl_pt_te_b where event_id = in_event_id and old_polyp_id = 'B';                end if;    end if;    if exists (select * from colo where event_id = in_event_id and (p_loc_c in (select location_text from location) or p_siz_c in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'C')) then                 select  barcode,p_loc_c,p_siz_c,pt_cb_c,pt_hb_c,pt_hs_c,pt_cs_c,pt_pme_c,pt_pe_c,pt_nr_c,pt_lo_c,pt_o_c,p_flat_c into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'C',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_c, pt_te = lcl_pt_te_c where event_id = in_event_id and old_polyp_id = 'C';                end if;    end if;    if exists (select * from colo where event_id = in_event_id and (p_loc_d in (select location_text from location) or p_siz_d in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'D')) then                 select  barcode,p_loc_d,p_siz_d,pt_cb_d,pt_hb_d,pt_hs_d,pt_cs_d,pt_pme_d,pt_pe_d,pt_nr_d,pt_lo_d,pt_o_d,p_flat_d into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'D',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_d, pt_te = lcl_pt_te_d where event_id = in_event_id and old_polyp_id = 'D';                end if;    end if;    if exists (select * from colo where event_id = in_event_id and (p_loc_e in (select location_text from location) or p_siz_e in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'E')) then                 select  barcode,p_loc_e,p_siz_e,pt_cb_e,pt_hb_e,pt_hs_e,pt_cs_e,pt_pme_e,pt_pe_e,pt_nr_e,pt_lo_e,pt_o_e,p_flat_e into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'E',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_e, pt_te = lcl_pt_te_e where event_id = in_event_id and old_polyp_id = 'E';                end if;    end if;    if exists (select * from colo where event_id = in_event_id and (p_loc_f in (select location_text from location) or p_siz_f in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'F')) then                 select  barcode,p_loc_f,p_siz_f,pt_cb_f,pt_hb_f,pt_hs_f,pt_cs_f,pt_pme_f,pt_pe_f,pt_nr_f,pt_lo_f,pt_o_f,p_flat_f into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'F',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_f, pt_te = lcl_pt_te_f where event_id = in_event_id and old_polyp_id = 'F';                end if;    end if;    if exists (select * from colo where event_id = in_event_id and (p_loc_g in (select location_text from location) or p_siz_g in ('01','02','03','04','05')) and         not exists (select * from polyp2 where event_id = in_event_id and old_polyp_id = 'G')) then                 select  barcode,p_loc_g,p_siz_g,pt_cb_g,pt_hb_g,pt_hs_g,pt_cs_g,pt_pme_g,pt_pe_g,pt_nr_g,pt_lo_g,pt_o_g,p_flat_g into                    lcl_barcode,lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat from                     colo where event_id = in_event_id;                insert into polyp2 (event_id,old_polyp_id,p_loc,p_siz,pt_cb,pt_hb,pt_hs,pt_cs,pt_pme,pt_pe,pt_nr,pt_lo,pt_o,p_flat) values                     (in_event_id,'G',lcl_p_loc,lcl_p_siz,lcl_pt_cb,lcl_pt_hb,lcl_pt_hs,lcl_pt_cs,lcl_pt_pme,lcl_pt_pe,lcl_pt_nr,lcl_pt_lo,lcl_pt_o,lcl_p_flat);                if substring(lcl_barcode from 1 for 1) = 'Q' then                     update polyp2 set pt_sn = lcl_pt_sn_g, pt_te = lcl_pt_te_g where event_id = in_event_id and old_polyp_id = 'G';                end if;    end if;end;$BODY$language plpgsql